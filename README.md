# FastAPI проект с JWT авторизацией, ролевой моделью, подтверждением регистрации по email и CRUD для постов, комментариев и лайков

Этот проект представляет собой пример реализации авторизации на базе JSON Web Tokens (JWT) и подтверждения регистрации пользователя через электронную почту. Также были добавлены две роли - пользователь и администратор (роли можно расширить в зависимости от проекта). У пользователя есть возможность создать пост, прикрепив к нему по желанию фотографии, оставлять комментарии к нему, и на посты других пользователей. Также пользователь может редактировать и удалять свои комментарии/посты, а ещё ставить лайки и дизлайки на посты (кроме собственного). У администратора есть доступ к админ-панели (SQLAdmin), в которой он может просматривать, удалять и редактировать посты/комментарии/лайки других пользователей

## Установка и запуск

Чтобы запустить приложение, выполните следующие шаги:

1. Клонируйте данный репозиторий:

```
$ git clone https://github.com/Petyall/fastapi-webtronics.git
```

2. Перейдите в папку проекта:

```
$ cd fastapi-webtronics
```

3. Установите зависимости:

```
$ pip install -r requirements.txt
```

4. Запустите приложение:

```
$ uvicorn app.main:app --reload
```

Для тестирования API вы можете использовать следующих пользователей:

Администратор:
Логин: admin@mail.ru
Пароль: string

Пользователь:
Логин: user1@mail.ru
Пароль: string

После этого вы можете перейти по адресу http://127.0.0.1:8000/docs в браузере и начать работу с приложением.
Чтобы воспользоваться админ-панелью, перейдите на http://127.0.0.1:8000/admin/login и авторизируйтесь, как администратор, используя данные для входа, написанные выше

## Описание API

API предоставляет следующие ресурсы:

### Работа с пользователями

`POST /auth/register/` : Регистрация пользователя. Отправляет ссылку для подтверждения регистрации.
`POST /auth/login/` : Авторизация пользователя. Возвращает JWT токен.
`POST /auth/logout/` : Выход пользователя из системы.
`GET /auth/profile/` : Возврат личного кабинета пользователя. Требует авторизацию.
`PUT /auth/profile/` : Изменение данных пользователя. Требует авторизацию.
`PUT /auth/all/` : Вывод всех пользователей. Требует авторизацию и наличие прав администратора.

### Работа с постами

`POST /posts/` : Создание поста. Требует авторизацию.
`GET /posts/{post_id}/` : Получение поста по id.
`GET /posts/post_with_comments/` : Получение поста по id с комментариями и лайками.
`PUT /posts/{post_id}/` : Изменение данных поста. Требует авторизацию и совпадения автора поста и пользователя.
`DELETE /posts/{post_id}/` : Удаление поста. Требует авторизацию и совпадения автора поста и пользователя.
`POST /posts/comment/` : Создание комментария к посту. Требует авторизацию.
`PUT /posts/comment/` : Изменение комментария к посту. Требует авторизацию и совпадения автора поста и пользователя.
`DELETE /posts/{post_id}/` : Удаление комментария. Требует авторизацию и совпадения автора поста и пользователя.
`GET /posts/{post_id}/like` : Добавление лайка. Требует авторизацию и  не совпадение автора поста и пользователя.
`GET /posts/{post_id}/dislike` : Добавление лайка. Требует авторизацию и не совпадение автора поста и пользователя.

## Технологии

В проекте были использованы следующие технологии:

- [FastAPI](https://fastapi.tiangolo.com/) — современный веб-фреймворк для Python;
- [SQLAdmin](https://github.com/aminalaee/sqladmin) — удобная админ-панель для FastAPI;
- [aiosqlite](https://github.com/omnilib/aiosqlite) — асинхронный SQLite-драйвер;